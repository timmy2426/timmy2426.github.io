document.addEventListener("DOMContentLoaded",function(){function a(a){let b=10>a?"0"+`${a}`:`${a}`;return b}function b(a,b){document.querySelector(a).addEventListener("keydown",a=>{"Enter"===a.key&&document.querySelector(b).click()})}function c(a,b){let c=window.screen.width,d=document.querySelector(a),e=document.querySelector(b),f=d.clientHeight;768>=c?e.setAttribute("style",`height: ${.8*window.screen.height}px;`):1200>=c&&"#timer-area"===a?e.setAttribute("style",`height: ${.8*window.screen.height}px;`):e.setAttribute("style",`height: ${f-120}px;`)}function d(){let b=new Date,c=0,d="",e="";12>b.getHours()?(d="AM",c=b.getHours()):12===b.getHours()?(d="PM",c=b.getHours()):(d="PM",c=b.getHours()-12),0===b.getDay()&&(e="\u661F\u671F\u65E5"),1===b.getDay()&&(e="\u661F\u671F\u4E00"),2===b.getDay()&&(e="\u661F\u671F\u4E8C"),3===b.getDay()&&(e="\u661F\u671F\u4E09"),4===b.getDay()&&(e="\u661F\u671F\u56DB"),5===b.getDay()&&(e="\u661F\u671F\u4E94"),6===b.getDay()&&(e="\u661F\u671F\u516D"),document.querySelector("#hrs").innerHTML=a(c),document.querySelector("#min").innerHTML=a(b.getMinutes()),document.querySelector("#sec").innerHTML=a(b.getSeconds()),document.querySelector("#session").innerHTML=d,document.querySelector("#yer").innerHTML=b.getFullYear(),document.querySelector("#mon").innerHTML=b.getMonth()+1,document.querySelector("#day").innerHTML=b.getDate(),document.querySelector("#weeks").innerHTML=e}function f(b,c){let d=Math.floor(c/100),e=Math.floor(d/60%60),f=Math.floor(d/3600%100);document.querySelector(`#t-sec-${b}`).innerHTML=a(d%60),document.querySelector(`#t-min-${b}`).innerHTML=a(e),document.querySelector(`#t-hrs-${b}`).innerHTML=a(f),r[t.indexOf(parseInt(b))].count=c}function g(a){a.addEventListener("click",b=>{let c=b.target.dataset.id,d=t.indexOf(parseInt(c));if("\u958B\u59CB"===a.innerHTML){let b=new Worker("https://tadralling.com/dist/dashboard/counter.min.js");b.postMessage({count:r[d].count}),b.onmessage=function(a){let b=a.data.count;f(c,b)},a.addEventListener("click",()=>{b.terminate()},{once:!0}),a.innerHTML="\u66AB\u505C"}else a.innerHTML="\u958B\u59CB"})}function h(a,b){a.addEventListener("click",a=>{let c=a.target.dataset.id,d=t.indexOf(parseInt(c));"\u958B\u59CB"!==b.innerHTML&&b.click(),r[d].count=0,f(c,r[d].count)})}function i(a,b){a.addEventListener("click",a=>{let c=a.target.dataset.id,d=t.indexOf(parseInt(c)),e=document.getElementById(c);"\u958B\u59CB"!==b.innerHTML&&b.click(),r.splice(d,1),t.splice(d,1),e.remove()})}function j(b){let d=Math.floor(b/100),c=Math.floor(d/60%60),e=Math.floor(d/3600%100);document.querySelector("#s-tms").innerHTML=a(b%100),document.querySelector("#s-sec").innerHTML=a(d%60),document.querySelector("#s-min").innerHTML=a(c),document.querySelector("#s-hrs").innerHTML=a(e),u=b}function k(a){a.addEventListener("click",a=>{let b=a.target.dataset.id,c=w.indexOf(parseInt(b)),d=document.getElementById(b);w.splice(c,1),d.remove()})}function l(a){let b=Math.abs(parseInt(a,10));return!0===isNaN(b)?0:b}function m(b){let d=Math.floor(b/100),c=Math.floor(d/3600),e=Math.floor(d%3600/60),f=Math.floor(d%3600%60);document.querySelector("#c-sec").innerHTML=a(f),document.querySelector("#c-min").innerHTML=a(e),document.querySelector("#c-hrs").innerHTML=a(c),y=b}function n(b,c){let d=Math.floor(100*(b/c));!0===isNaN(d)&&(d=0),document.querySelector("#percent-number").innerHTML=a(d),document.querySelector("#graph-percent").style.strokeDashoffset=`${3.1416*(70*(2*((100-d)/100)))}`}function o(){function a(){let a=document.querySelector("#countdown-timer-area").querySelector("#c-start-pause");g="\u958B\u59CB"===a.innerHTML?y===x?0:1:2}function b(a,b){let d=c.querySelector(a);0===b&&(d.querySelector(".standby").classList.add("show"),d.querySelector(".suspension").classList.remove("show"),d.querySelector(".activation").classList.remove("show"),d.querySelector(".light").classList.add("green"),d.querySelector(".light").classList.remove("orange"),d.querySelector(".light").classList.remove("red")),1===b&&(d.querySelector(".standby").classList.remove("show"),d.querySelector(".suspension").classList.add("show"),d.querySelector(".activation").classList.remove("show"),d.querySelector(".light").classList.remove("green"),d.querySelector(".light").classList.add("orange"),d.querySelector(".light").classList.remove("red")),2===b&&(d.querySelector(".standby").classList.remove("show"),d.querySelector(".suspension").classList.remove("show"),d.querySelector(".activation").classList.add("show"),d.querySelector(".light").classList.remove("green"),d.querySelector(".light").classList.remove("orange"),d.querySelector(".light").classList.add("red"))}let c=document.querySelector("#status-area"),d=0,e={activation:0,suspension:0,standby:0},f=0,g=0;(function(){document.querySelectorAll(".record").forEach(()=>{d++})})(),function(){document.querySelectorAll(".timer").forEach(a=>{let b=0;a.querySelectorAll("span").forEach(a=>{"00"!==a.innerHTML&&b++}),"\u958B\u59CB"===a.querySelector("#t-start-pause").innerHTML?0===b?e.standby++:e.suspension++:e.activation++})}(),function(){let a=document.querySelector("#stopwatch-area"),b=0;a.querySelectorAll("span").forEach(a=>{"00"!==a.innerHTML&&b++}),f="\u958B\u59CB"===a.querySelector("#s-start-pause").innerHTML?1===b?0:1:2}(),a(),b(".stopwatch",f),b(".countdown-timer",g),c.querySelector("#stopwatch-record-count").innerHTML=d,c.querySelector("#countdown-timer-percent").innerHTML=document.querySelector("#percent-number").innerHTML,c.querySelector("#timer-count").innerHTML=e.activation+e.suspension+e.standby,z.activation===e.activation&&z.suspension===e.suspension&&z.standby===e.standby||(B.data.datasets[0].data[0]=e.activation,B.data.datasets[0].data[1]=e.suspension,B.data.datasets[0].data[2]=e.standby,B.options.scales.y.max=Math.max(...p.datasets[0].data)+1,B.update(),z=e)}const p={labels:["\u555F\u52D5","\u66AB\u505C","\u5F85\u6A5F"],datasets:[{data:[0,0,0],backgroundColor:["rgba(255, 0, 0, 0.2)","rgba(255, 165, 0, 0.2)","rgba(0, 128, 0, 0.2)"],borderColor:["#ff0000","#ffa500","#008000"],borderWidth:1}]},q={type:"bar",data:p,options:{scales:{y:{beginAtZero:!0,ticks:{stepSize:1,color:"#2f0000"},max:Math.max(...p.datasets[0].data)+1,grid:{color:"#e0e0e0"}},x:{ticks:{color:"#2f0000"},grid:{color:"#e0e0e0"}}},plugins:{legend:{display:!1}},layout:{padding:15}}};let r=[],t=[],u=0,v=0,w=[],x=0,y=0,z={activation:0,suspension:0,standby:0},A=new Audio("https://tadralling.com/dist/dashboard/digital-alarm.mp3");A.loop=!0;let B=new Chart(document.getElementById("status-chart"),q);Chart.defaults.font.size=20;class C{constructor(a){this.id=Date.now(),this.name=a,this.count=0}}if(c("#stopwatch-record-area","#stopwatch-records"),c("#timer-area","#timer-columns"),localStorage.getItem("timerList")&&(r=JSON.parse(localStorage.getItem("timerList"))),localStorage.getItem("timerIdList")&&(t=JSON.parse(localStorage.getItem("timerIdList"))),localStorage.getItem("timerHTML")&&(document.querySelector("#timer-columns").innerHTML=localStorage.getItem("timerHTML"),document.querySelectorAll(".timer").forEach(a=>{let b=a.querySelector("#t-start-pause"),c=a.querySelector("#t-reset"),d=a.querySelector("#t-delete");g(b),h(c,b),i(d,b)})),localStorage.getItem("stopwatchCount")&&(u=parseInt(localStorage.getItem("stopwatchCount"),10),j(u)),localStorage.getItem("recordNum")&&(v=parseInt(localStorage.getItem("recordNum"),10)),localStorage.getItem("recordIdList")&&(w=JSON.parse(localStorage.getItem("recordIdList"))),localStorage.getItem("recordHTML")&&(document.querySelector("#stopwatch-records").innerHTML=localStorage.getItem("recordHTML"),document.querySelectorAll(".record").forEach(a=>{let b=a.querySelector("#s-delete");k(b)})),localStorage.getItem("countdownTimerInit")&&localStorage.getItem("countdownTimerCount")&&(x=parseInt(localStorage.getItem("countdownTimerInit"),10),y=parseInt(localStorage.getItem("countdownTimerCount"),10),m(y),n(y,x)),d(),o(),setInterval(d,1e3),setInterval(o,100),window.addEventListener("unload",()=>{localStorage.clear();let a=document.querySelector("#mode-toggle").checked;localStorage.setItem("darkMode",a),document.querySelectorAll(".timer").forEach(a=>{let b=a.querySelector("#t-start-pause");"\u958B\u59CB"!==b.innerHTML&&(b.innerHTML="\u958B\u59CB")});let b=document.querySelector("#timer-columns");localStorage.setItem("timerList",JSON.stringify(r)),localStorage.setItem("timerIdList",JSON.stringify(t)),localStorage.setItem("timerHTML",b.innerHTML);let c=document.querySelector("#stopwatch-records");localStorage.setItem("recordIdList",JSON.stringify(w)),localStorage.setItem("stopwatchCount",u),localStorage.setItem("recordNum",v),localStorage.setItem("recordHTML",c.innerHTML),localStorage.setItem("countdownTimerInit",x),localStorage.setItem("countdownTimerCount",y)}),document.querySelector("#mode-toggle").addEventListener("change",function(){this.checked?(document.querySelector("body").classList.add("dark-mode"),document.querySelector("#mode-status").classList.add("dark"),document.querySelector("#mode-status").classList.remove("light"),B.config.options.scales.y.ticks.color="#e0e0e0",B.config.options.scales.x.ticks.color="#e0e0e0",B.config.options.scales.y.grid.color="#3c3c3c",B.config.options.scales.x.grid.color="#3c3c3c",B.data.datasets[0].backgroundColor[0]="rgba(246, 121, 194, 0.3)",B.data.datasets[0].backgroundColor[1]="rgba(243, 157, 104, 0.3)",B.data.datasets[0].backgroundColor[2]="rgba(185, 210, 177, 0.3)",B.data.datasets[0].borderColor[0]="#f679c2",B.data.datasets[0].borderColor[1]="#f39d68",B.data.datasets[0].borderColor[2]="#b9d2b1"):(document.querySelector("body").classList.remove("dark-mode"),document.querySelector("#mode-status").classList.remove("dark"),document.querySelector("#mode-status").classList.add("light"),B.config.options.scales.y.ticks.color="#2f0000",B.config.options.scales.x.ticks.color="#2f0000",B.config.options.scales.y.grid.color="#e0e0e0",B.config.options.scales.x.grid.color="#e0e0e0",B.data.datasets[0].backgroundColor[0]="rgba(255, 0, 0, 0.2)",B.data.datasets[0].backgroundColor[1]="rgba(255, 160, 66, 0.2)",B.data.datasets[0].backgroundColor[2]="rgba(0, 128, 0, 0.2)",B.data.datasets[0].borderColor[0]="#ff0000",B.data.datasets[0].borderColor[1]="#ffa042",B.data.datasets[0].borderColor[2]="#008000"),B.update()}),"true"===localStorage.getItem("darkMode"))document.querySelector("#mode-toggle").click();else{if("false"===localStorage.getItem("darkMode"))return;window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&document.querySelector("#mode-toggle").click()}b("#input-timer-name","#t-build"),document.querySelector("#t-build").onclick=function(){if(""!==document.querySelector("#input-timer-name").value){let a=Math.max(...t),b=document.getElementById(a),c=document.querySelector("#input-timer-name").value;document.querySelector("#input-timer-name").value="";let d=new C(c);r.push(d),t.push(d.id);let e=document.createElement("div");e.setAttribute("class","timer"),e.setAttribute("id",d.id),e.innerHTML="<div class=\"title\"><h3>"+d.name+"</h3></div><div class=\"times\"><p><span id=\"t-hrs-"+d.id+"\">00</span> \u6642 <span id=\"t-min-"+d.id+"\">00</span> \u5206 <span id=\"t-sec-"+d.id+"\">00</span> \u79D2</p></div><div class=\"controls\"><button id=\"t-start-pause\" data-id=\""+d.id+"\">\u958B\u59CB</button><button id=\"t-reset\" data-id=\""+d.id+"\">\u6B78\u96F6</button><button id=\"t-delete\" data-id=\""+d.id+"\">\u522A\u9664</button></div>",""===document.querySelector("#timer-columns").innerHTML?document.querySelector("#timer-columns").appendChild(e):document.querySelector("#timer-columns").insertBefore(e,b);let f=document.getElementById(d.id),j=f.querySelector("#t-start-pause"),k=f.querySelector("#t-reset"),l=f.querySelector("#t-delete");g(j),h(k,j),i(l,j)}},document.querySelector("#t-clean").onclick=function(){document.querySelectorAll(".timer").forEach(a=>{let b=a.querySelector("#t-start-pause");"\u958B\u59CB"!==b.innerHTML&&b.click()}),document.querySelector("#timer-columns").innerHTML="",r=[],t=[]},document.querySelector("#s-start-pause").onclick=function(){if("\u958B\u59CB"===document.querySelector("#s-start-pause").innerHTML){let a=new Worker("https://tadralling.com/dist/dashboard/counter.min.js");a.postMessage({count:u}),a.onmessage=function(a){let b=a.data.count;j(b)},document.querySelector("#s-start-pause").addEventListener("click",()=>{a.terminate()},{once:!0}),document.querySelector("#s-start-pause").innerHTML="\u66AB\u505C"}else document.querySelector("#s-start-pause").innerHTML="\u958B\u59CB"},document.querySelector("#s-reset").onclick=function(){"\u958B\u59CB"!==document.querySelector("#s-start-pause").innerHTML&&document.querySelector("#s-start-pause").click(),u=0,j(u)},document.querySelector("#s-record").onclick=function(){v++;let a=Math.max(...w),b=document.getElementById(a),c=document.querySelector("#s-tms").innerHTML,d=document.querySelector("#s-sec").innerHTML,e=document.querySelector("#s-min").innerHTML,f=document.querySelector("#s-hrs").innerHTML,g=Date.now();w.push(g);let h=document.createElement("div");h.setAttribute("class","record"),h.setAttribute("id",g),h.innerHTML="<div class=\"times\"><p>#"+v+"&emsp;&emsp;"+f+" \u6642 "+e+" \u5206 "+d+" \u79D2<span> "+c+"</span></p></div><div class=\"record-controls\"><button id=\"s-delete\" data-id=\""+g+"\">\u522A\u9664</button></div>",""===document.querySelector("#stopwatch-records").innerHTML?document.querySelector("#stopwatch-records").appendChild(h):document.querySelector("#stopwatch-records").insertBefore(h,b);let i=document.querySelector("#stopwatch-records"),j=i.querySelector("#s-delete");k(j)},document.querySelector("#s-clean").onclick=function(){document.querySelector("#stopwatch-records").innerHTML="",v=0,w=[]},b("#input-c-sec","#send"),b("#input-c-min","#send"),b("#input-c-hrs","#send"),document.querySelector("#send").onclick=function(){let a=0,b=document.querySelector("#input-c-sec").value,c=document.querySelector("#input-c-min").value,d=document.querySelector("#input-c-hrs").value;""!==b&&(a+=100*l(b)),""!==c&&(a+=60*(100*l(c))),""!==d&&(a+=3600*(100*l(d))),35999900<a?(y=35999900,x=35999900):(y=a,x=a),m(y),n(y,x),document.querySelector("#input-c-sec").value="",document.querySelector("#input-c-min").value="",document.querySelector("#input-c-hrs").value=""},document.querySelector("#c-start-pause").onclick=function(){if(0===y)A.pause(),A.currentTime=0,y=x,m(y),n(y,x),document.querySelector("#c-start-pause").innerHTML="\u958B\u59CB";else if("\u958B\u59CB"===document.querySelector("#c-start-pause").innerHTML){let a=new Worker("https://tadralling.com/dist/dashboard/countdown.min.js");a.postMessage({count:y}),a.onmessage=function(a){let b=a.data.count;m(b),n(y,x),0===b&&A.play()},document.querySelector("#c-start-pause").addEventListener("click",()=>{a.terminate()},{once:!0}),document.querySelector("#c-start-pause").innerHTML="\u66AB\u505C"}else document.querySelector("#c-start-pause").innerHTML="\u958B\u59CB"},document.querySelector("#c-reset").onclick=function(){"\u958B\u59CB"!==document.querySelector("#c-start-pause").innerHTML&&document.querySelector("#c-start-pause").click(),A.pause(),A.currentTime=0,y=x,m(y),n(y,x)}});